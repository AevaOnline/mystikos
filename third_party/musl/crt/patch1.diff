diff --git a/src/internal/__popcountdi2.c b/src/internal/__popcountdi2.c
new file mode 100644
index 00000000..b4b374a1
--- /dev/null
+++ b/src/internal/__popcountdi2.c
@@ -0,0 +1,16 @@
+
+__attribute__((__weak__))
+int __popcountdi2(unsigned long a)
+{
+    unsigned long nbits = 0;
+
+    /* Count the number of bits that are set */
+    for (unsigned long i = 0; i < 64; i++)
+    {
+        if ((a & (1LU << i)))
+            nbits++;
+    }
+
+    /* Return 1 if the nbits is odd; return 0 if nbits is event */
+    return (nbits % 2) ? 1 : 0;
+}
diff --git a/src/stdio/__fprintf_chk.c b/src/stdio/__fprintf_chk.c
new file mode 100644
index 00000000..50253c11
--- /dev/null
+++ b/src/stdio/__fprintf_chk.c
@@ -0,0 +1,23 @@
+#include <stdio.h>
+#include <stdarg.h>
+
+extern int __vfprintf_chk(
+    FILE *stream,
+    int flag,
+    const char *format,
+    va_list ap);
+
+__attribute__((__weak__))
+int __fprintf_chk(FILE *stream, int flag, const char *format, ...)
+{
+    int ret;
+    va_list ap;
+
+    (void)flag;
+
+    va_start(ap, format);
+    ret = __vfprintf_chk(stream, flag, format, ap);
+    va_end(ap);
+
+    return ret;
+}
diff --git a/src/stdio/__vfprintf_chk.c b/src/stdio/__vfprintf_chk.c
new file mode 100644
index 00000000..5493e453
--- /dev/null
+++ b/src/stdio/__vfprintf_chk.c
@@ -0,0 +1,11 @@
+#include <stdio.h>
+#include <assert.h>
+
+__attribute__((__weak__))
+int __vfprintf_chk(FILE *stream, int flag, const char *format, va_list ap)
+{
+    assert(stream);
+    assert(format);
+    (void)flag;
+    return vfprintf(stream, format, ap);
+}
diff --git a/src/thread/x86_64/__set_thread_area.s b/src/thread/x86_64/__set_thread_area.s
deleted file mode 100644
index 7347ff4d..00000000
--- a/src/thread/x86_64/__set_thread_area.s
+++ /dev/null
@@ -1,11 +0,0 @@
-/* Copyright 2011-2012 Nicholas J. Kain, licensed under standard MIT license */
-.text
-.global __set_thread_area
-.hidden __set_thread_area
-.type __set_thread_area,@function
-__set_thread_area:
-	mov %rdi,%rsi           /* shift for syscall */
-	movl $0x1002,%edi       /* SET_FS register */
-	movl $158,%eax          /* set fs segment to */
-	syscall                 /* arch_prctl(SET_FS, arg)*/
-	ret
diff --git a/src/thread/x86_64/clone.s b/src/thread/x86_64/clone.s
deleted file mode 100644
index 6e47bc0a..00000000
--- a/src/thread/x86_64/clone.s
+++ /dev/null
@@ -1,28 +0,0 @@
-.text
-.global __clone
-.hidden __clone
-.type   __clone,@function
-__clone:
-	xor %eax,%eax
-	mov $56,%al
-	mov %rdi,%r11
-	mov %rdx,%rdi
-	mov %r8,%rdx
-	mov %r9,%r8
-	mov 8(%rsp),%r10
-	mov %r11,%r9
-	and $-16,%rsi
-	sub $8,%rsi
-	mov %rcx,(%rsi)
-	syscall
-	test %eax,%eax
-	jnz 1f
-	xor %ebp,%ebp
-	pop %rdi
-	call *%r9
-	mov %eax,%edi
-	xor %eax,%eax
-	mov $60,%al
-	syscall
-	hlt
-1:	ret
